<!--
采集网址结果页 (Collect URL Result)
============================================================

【页面说明】
显示采集列表页URL后提取到的内容URL列表
展示采集统计信息和去重结果

【控制器方法】
Cj::col_url() - application/admin/controller/Cj.php

【访问路径】
GET admin.php/cj/col_url?id=xxx&page=x

【模板变量】
$url_list   - 当前采集的列表页URL
$url        - 提取到的内容URL数组 [{url, title}]
$total      - 本页提取URL总数
$re         - 重复URL数量 (已存在于 cj_history)
$total_page - 列表页总页数
$param      - 请求参数

【自动翻页】
多页时自动跳转到下一页继续采集

============================================================
-->

{include file="../../../application/admin/view_new/public/head" /}
<div class="page-container p10">

    <fieldset class="layui-elem-field">
        <legend>{:lang('base_info')}</legend>
        <div class="layui-field-box">
            {$url_list} <br>{:lang('sum')}：{$total} {:lang('data')}，{:lang('duplicate_data')}：{$re}{:lang('data')}，{:lang('distinct_into')}{$total-$re}{:lang('data')}。
        </div>
    </fieldset>

    <table class="layui-table" lay-size="sm">
    <thead>
      <tr>
        <th width="50">{:lang('serial_num')}</th>
		<th>{:lang('link')}</th>
        <th>{:lang('name')}</th>
      </tr> 
    </thead>
    <tbody>
		{foreach name="url" item="v"}
		  <tr>
			  <td>{$n=$n+1}</td>
			  <td>{$v.url}</td>
			  <td>{$v.title}</td>
		  </tr>
	  {/foreach}
    </tbody>
  </table>
</div>
<script>
var total_page = {$total_page};
var page = {$param['page']|mac_filter_xss};
var id = {$param['id']|mac_filter_xss};
if (total_page > page) {
    var url = "{:url('cj/col_url_list')}";
	page += 1;
    //location.href= url + '?page='+page+'&id='+id;
} else {
	//alert('采集完成');
}
</script>
</body>
</html>