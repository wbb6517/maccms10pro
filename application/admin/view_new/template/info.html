<!--
模板文件编辑页 (Template File Editor)
============================================================

【页面说明】
提供模板文件的查看和编辑功能，支持新增文件。
显示安全过滤规则提示，防止用户输入危险代码。

【控制器方法】
Template::info() - application/admin/controller/Template.php

【访问路径】
GET  admin.php/template/info?fpath=xxx&fname=xxx  显示文件内容
POST admin.php/template/info                       保存文件内容

【模板变量】
$filter   - 危险字符串过滤规则 (正则表达式)
$fpath    - 文件所在目录路径
$fname    - 文件名 (编辑时只读，新增时可编辑)
$fcontent - 文件内容

【表单字段说明】
┌──────────────────┬─────────────────────────────────────────┐
│ 字段名            │ 说明                                     │
├──────────────────┼─────────────────────────────────────────┤
│ fpath            │ 文件路径 (只读)                          │
│ fname            │ 文件名 (新增时可编辑)                     │
│ fcontent         │ 文件内容 (textarea 大文本编辑区)          │
└──────────────────┴─────────────────────────────────────────┘

【安全机制】
- 页面顶部显示禁止使用的危险字符串列表
- 提交前由控制器进行内容过滤检测
- 禁止包含 PHP 代码、eval、shell 等危险内容

============================================================
-->

<!-- 引入公共头部 -->
{include file="../../../application/admin/view_new/public/head" /}
<div class="page-container">
    <form class="layui-form layui-form-pane" method="post" action="">
        <input type="hidden" name="__token__" value="{$Request.token}" />
        <blockquote class="layui-elem-quote layui-quote-nm">
            提示信息：<br>
            为了安全考量避免通过模板写入后门文件，文件内出现以下任意字符串时禁止在线保存修改，如需修改请使用其他方式。<br>
            {$filter}
        </blockquote>
        <div class="layui-form-item">
            <label class="layui-form-label">{:lang('path')}：</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" value="{$fpath}" placeholder="" id="fpath" name="fpath" readonly="readonly">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">{:lang('file_name')}：</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input" value="{$fname}" placeholder="{:lang('admin/template/name_tip')}" id="fname" name="fname" {if condition="$fname neq ''"}readonly="readonly"{/if}>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">{:lang('content')}：</label>
            <div class="layui-input-block">
                <textarea name="fcontent" cols="" rows="" class="layui-textarea"  placeholder="" style="height:550px;">{$fcontent}</textarea>
            </div>
        </div>

        <div class="layui-form-item center">
            <div class="layui-input-block">
                <button type="submit" class="layui-btn" lay-submit="" lay-filter="formSubmit" data-child="true">{:lang('btn_save')}</button>
                <button class="layui-btn layui-btn-primary" type="reset">{:lang('btn_reset')}</button>
            </div>
        </div>
    </form>

</div>
{include file="../../../application/admin/view_new/public/foot" /}

<script type="text/javascript">

</script>

</body>
</html>